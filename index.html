<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Refold 1000 Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #05070a; --card: #111827; --accent: #6366f1; --success: #10b981; --text: #f8fafc; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Navegaci√≥n responsiva */
        nav { width: 280px; background: #0f172a; border-right: 2px solid #1e293b; padding: 20px; display: flex; flex-direction: column; height: 100vh; overflow-y: auto; }
        @media (max-width: 768px) { nav { width: 80px; padding: 10px; } .nav-text { display: none; } }

        .nav-item { padding: 15px; border-radius: 12px; cursor: pointer; margin-bottom: 8px; color: #94a3b8; font-weight: 700; background: rgba(255,255,255,0.02); transition: 0.3s; text-align: center; }
        .nav-item.active { background: var(--accent); color: white; }
        .nav-item.special { background: #fbbf24; color: #000; }

        /* √Årea de Estudio con espaciado mejorado */
        main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .card-container { perspective: 1200px; width: 100%; max-width: 340px; height: 450px; margin: 25px 0; }
        .card { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
        .card.is-flipped { transform: rotateY(180deg); }
        .face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 35px; padding: 25px; display: flex; flex-direction: column; align-items: center; background: var(--card); border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 15px 35px rgba(0,0,0,0.5); }
        .face-back { transform: rotateY(180deg); background: #0f172a; border: 2px solid var(--accent); }

        .img-box { width: 100%; height: 200px; border-radius: 20px; overflow: hidden; margin-bottom: 20px; background: #000; }
        img { width: 100%; height: 100%; object-fit: cover; }

        .word { font-size: 28px; font-weight: 800; margin-bottom: 10px; text-align: center; }
        .sentence { font-size: 16px; color: #94a3b8; text-align: center; font-style: italic; line-height: 1.4; }

        .controls { display: flex; gap: 15px; width: 100%; max-width: 340px; margin-top: 10px; }
        .btn { flex: 1; padding: 18px; border: none; border-radius: 20px; font-weight: 800; cursor: pointer; color: white; font-size: 0.9rem; }
        
        #overlay { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; }
    </style>
</head>
<body>

    <div id="overlay">
        <h1 style="font-size: 2.5rem; margin-bottom: 10px;">Refold Mastery</h1>
        <p style="color: #64748b; margin-bottom: 30px;">Optimizado para M√≥vil y PC</p>
        <button onclick="iniciar()" style="padding: 20px 50px; border-radius: 50px; background: var(--accent); color: white; border: none; font-weight: 800; font-size: 1.2rem; cursor: pointer;">COMENZAR</button>
    </div>

    <nav><div id="menu-items"></div></nav>

    <main>
        <div id="streak-info" style="color: #fbbf24; font-weight: 800;">üî• Racha: 0 d√≠as</div>
        <div class="card-container">
            <div class="card" id="card" onclick="this.classList.toggle('is-flipped')">
                <div class="face">
                    <div class="img-box"><img id="q-img" src=""></div>
                    <div class="word" id="q-word">...</div>
                    <div class="sentence" id="q-sent">...</div>
                </div>
                <div class="face face-back">
                    <div style="color: var(--accent); font-weight: 800; margin-bottom: 15px; font-size: 0.8rem;">TRADUCCI√ìN</div>
                    <div class="word" id="a-word" style="color: var(--success);">...</div>
                    <div class="sentence" id="a-sent" style="color: white;">...</div>
                </div>
            </div>
        </div>
        <div id="progress-tag" style="color: #475569; font-size: 0.8rem; margin-bottom: 15px;">Tarjeta 0 de 0</div>
        <div class="controls">
            <button class="btn" style="background: #334155;" onclick="responder(false)">REPETIR</button>
            <button class="btn" style="background: var(--accent);" onclick="responder(true)">ENTENDIDO</button>
        </div>
    </main>

    <script>
        const data = {
            "repaso_sabado": [],
            1: [
                { w: "Actually", t: "En realidad", s: "Actually, it's very easy.", st: "En realidad, es muy f√°cil.", i: "https://picsum.photos/seed/p1/400/300" },
                { w: "Available", t: "Disponible", s: "Is it available?", st: "¬øEst√° disponible?", i: "https://picsum.photos/seed/p2/400/300" },
                { w: "Development", t: "Desarrollo", s: "Personal development.", st: "Desarrollo personal.", i: "https://picsum.photos/seed/p3/400/300" }
            ],
            2: [], 3: [], 4: [], 5: [], 6: [], 7: [], 8: [], 9: [], 10: []
        };

        // Generador de las 1000 palabras
        for (let m = 1; m <= 10; m++) {
            if (data[m].length < 100) {
                let actual = data[m].length;
                for (let i = actual; i < 100; i++) {
                    data[m].push({
                        w: `Word ${i + 1} (Mazo ${m})`,
                        t: `Traducci√≥n ${i + 1}`,
                        s: `Example sentence for word ${i + 1}.`,
                        st: `Oraci√≥n traducida ${i + 1}.`,
                        i: `https://picsum.photos/seed/m${m}img${i}/400/300`
                    });
                }
            }
        }
        data.repaso_sabado = [...data[1], ...data[2].slice(0, 25)];

        // Cambiamos el nombre de la key para forzar recarga en PC
        let state = JSON.parse(localStorage.getItem('refold_v3_gold')) || {
            deck: "repaso_sabado", index: 0, racha: 0, fecha: ""
        };

        const synth = window.speechSynthesis;

        function iniciar() {
            document.getElementById('overlay').style.display = 'none';
            synth.cancel();
            synth.speak(new SpeechSynthesisUtterance(""));
            dibujarMenu();
            mostrarTarjeta();
            actualizarRacha();
        }

        function dibujarMenu() {
            const menu = document.getElementById('menu-items');
            menu.innerHTML = `<div style="font-weight:800; color:var(--accent); margin-bottom:20px;" class="nav-text">MAZOS</div>`;
            if(new Date().getDay() === 6) menu.appendChild(crearBoton("‚≠ê REPASO", "repaso_sabado", true));
            for(let i=1; i<=10; i++) menu.appendChild(crearBoton("Mazo "+i, i, false));
        }

        function crearBoton(txt, id, spec) {
            const d = document.createElement('div');
            d.className = `nav-item ${state.deck == id ? 'active' : ''} ${spec ? 'special' : ''}`;
            d.innerHTML = `<span class="nav-text">${txt}</span><span style="display:none" class="nav-icon">${id}</span>`;
            d.onclick = () => { state.deck = id; state.index = 0; dibujarMenu(); mostrarTarjeta(); };
            return d;
        }

        function mostrarTarjeta() {
            const mazo = data[state.deck];
            const item = mazo[state.index % mazo.length];
            document.getElementById('q-word').innerText = item.w;
            document.getElementById('q-sent').innerText = item.s;
            document.getElementById('a-word').innerText = item.t;
            document.getElementById('a-sent').innerText = item.st;
            document.getElementById('q-img').src = item.i;
            document.getElementById('card').classList.remove('is-flipped');
            document.getElementById('progress-tag').innerText = `Tarjeta ${state.index + 1} de ${mazo.length}`;
            hablar(item.w + ". " + item.s);
        }

        function hablar(t) {
            synth.cancel();
            const f = new SpeechSynthesisUtterance(t);
            f.lang = 'en-US'; f.rate = 0.85;
            synth.speak(f);
        }

        function responder(c) {
            if(c) {
                state.index++;
                localStorage.setItem('refold_v3_gold', JSON.stringify(state));
            }
            mostrarTarjeta();
        }

        function actualizarRacha() {
            const h = new Date().toDateString();
            if(state.fecha !== h) { state.racha++; state.fecha = h; localStorage.setItem('refold_v3_gold', JSON.stringify(state)); }
            document.getElementById('streak-info').innerText = `üî• Racha: ${state.racha} d√≠as`;
        }
    </script>
</body>
</html>
