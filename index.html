<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refold English App</title>
    <style>
        :root {
            --primary: #3b82f6;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
        }
        body { font-family: sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        /* Overlay de Inicio */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 2000; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }

        /* NavegaciÃ³n */
        nav { background: white; border-bottom: 1px solid #e2e8f0; padding: 10px; overflow-x: auto; white-space: nowrap; }
        .nav-item {
            display: inline-block; padding: 8px 15px; margin-right: 5px;
            background: #f1f5f9; border-radius: 20px; cursor: pointer; font-size: 0.9rem;
        }
        .nav-item.active { background: var(--primary); color: white; }

        /* Tarjeta */
        main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .card-container { perspective: 1000px; width: 100%; max-width: 400px; height: 450px; }
        .card {
            width: 100%; height: 100%; position: relative; transition: transform 0.6s;
            transform-style: preserve-3d; cursor: pointer;
        }
        .card.is-flipped { transform: rotateY(180deg); }
        .face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: white; border-radius: 20px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            padding: 20px; box-sizing: border-box; text-align: center;
        }
        .face-back { transform: rotateY(180deg); }
        img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 20px; }
        
        .word { font-size: 2rem; font-weight: bold; color: var(--text); }
        .sentence { color: #64748b; margin-top: 10px; }

        /* Controles */
        .controls { display: flex; gap: 10px; width: 100%; max-width: 400px; margin-top: 20px; }
        .btn {
            flex: 1; padding: 15px; border: none; border-radius: 12px;
            color: white; font-weight: bold; cursor: pointer; font-size: 1rem;
        }
    </style>
</head>
<body>

    <div id="overlay">
        <h1>Refold English</h1>
        <p>Selecciona tu meta diaria:</p>
        <select id="words-per-day" style="padding: 10px; margin-bottom: 20px;">
            <option value="5">5 palabras</option>
            <option value="10" selected>10 palabras</option>
        </select>
        <button onclick="iniciar()" style="padding: 15px 40px; background: var(--primary); color: white; border: none; border-radius: 50px; cursor: pointer;">
            COMENZAR SESIÃ“N
        </button>
    </div>

    <nav id="menu-items"></nav>

    <main>
        <div id="streak-info">ðŸ”¥ Racha: 0 dÃ­as</div>
        <div class="card-container">
            <div class="card" id="card" onclick="this.classList.toggle('is-flipped')">
                <div class="face">
                    <img id="q-img" src="" alt="Imagen">
                    <div id="q-word" class="word">...</div>
                    <div id="q-sent" class="sentence">...</div>
                </div>
                <div class="face face-back">
                    <div style="color: var(--primary); font-weight: bold; margin-bottom: 10px;">TRADUCCIÃ“N</div>
                    <div id="a-word" class="word" style="color: #10b981;">...</div>
                    <div id="a-sent" class="sentence">...</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" style="background: #64748b;" onclick="responder(false)">REPETIR</button>
            <button class="btn" style="background: #10b981;" onclick="responder(true)">ENTENDIDO</button>
        </div>
    </main>

    <script>
        // --- 1. BASE DE DATOS (DATA) ---
        const data = {
            1: [
                { id: "1-1", w: "Apple", t: "Manzana", s: "I eat an apple.", st: "Yo como una manzana.", i: "https://picsum.photos/400/300" }
            ],
            2: [], 3: [], 4: [], 5: [], 6: [], 7: [], 8: [], 9: [], 10: []
        };

        // --- 2. VARIABLES GLOBALES ---
        let currentDeck = 1;
        let currentIndex = 0;
        let wordsPerDeck = 5;

        // --- 3. FUNCIONES DEL MOTOR ---
        function iniciar() {
            document.getElementById('overlay').style.display = 'none';
            crearMenu();
            cargarTarjeta();
        }

        function cargarTarjeta() {
            const mazo = data[currentDeck] || [];
            const container = document.getElementById('card');

            if (mazo.length === 0 || currentIndex >= mazo.length) {
                container.innerHTML = `<div class="face"><h2>Mazo ${currentDeck} completado</h2><p>Selecciona otro mazo arriba</p></div>`;
                return;
            }

            const item = mazo[currentIndex];
            container.classList.remove('is-flipped');

            // Llenado de datos
            document.getElementById('q-img').src = item.i;
            document.getElementById('q-word').innerText = item.w;
            document.getElementById('q-sent').innerText = item.s;
            document.getElementById('a-word').innerText = item.t;
            document.getElementById('a-sent').innerText = item.st;
        }

        function responder(entendido) {
            if (entendido) {
                // AquÃ­ podrÃ­as guardar en localStorage si quisieras
            }
            currentIndex++;
            cargarTarjeta();
        }

        function crearMenu() {
            const menu = document.getElementById('menu-items');
            menu.innerHTML = '';
            for (let i = 1; i <= 10; i++) {
                const item = document.createElement('div');
                item.className = `nav-item ${currentDeck === i ? 'active' : ''}`;
                item.innerText = `Mazo ${i}`;
                item.onclick = () => {
                    currentDeck = i;
                    currentIndex = 0;
                    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                    item.classList.add('active');
                    cargarTarjeta();
                };
                menu.appendChild(item);
            }
        }
    </script>
</body>
</html>
