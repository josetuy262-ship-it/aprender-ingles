<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refold 1000: English Mastery</title>
    <style>
        :root { --primary: #4f46e5; --bg: #0f172a; --card-bg: #1e293b; --text: #f8fafc; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; overflow: hidden; }
        
        .progress-bar { position: fixed; top: 0; width: 100%; height: 6px; background: #334155; }
        #fill { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }

        .card-container { perspective: 1000px; width: 90%; max-width: 350px; height: 480px; position: relative; }
        .card { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
        .card.is-flipped { transform: rotateY(180deg); }
        
        .face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 24px; padding: 25px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; background: var(--card-bg); border: 1px solid #334155; }
        .face-back { transform: rotateY(180deg); background: #1e293b; }

        .img-container { width: 100%; height: 180px; border-radius: 15px; overflow: hidden; margin-bottom: 20px; background: #0f172a; }
        img { width: 100%; height: 100%; object-fit: cover; }
        
        .word { font-size: 36px; font-weight: 800; color: #818cf8; margin: 0; }
        .sentence { font-size: 18px; color: #94a3b8; margin-top: 15px; line-height: 1.4; font-style: italic; }
        .translation { font-size: 22px; color: #22c55e; font-weight: 700; margin-top: 10px; }

        .controls { display: flex; gap: 15px; margin-top: 30px; width: 90%; max-width: 350px; }
        button { flex: 1; padding: 18px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; transition: 0.2s; font-size: 16px; }
        .btn-red { background: #ef4444; color: white; }
        .btn-green { background: #22c55e; color: white; }
        
        .instruction { margin-top: 15px; font-size: 12px; color: #64748b; }
    </style>
</head>
<body>

    <div class="progress-bar"><div id="fill"></div></div>
    
    <div style="margin-bottom: 20px; font-weight: bold; color: #64748b;" id="counter">Cargando mazo...</div>

    <div class="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="face">
                <div class="img-container"><img id="c-img" src="" alt=""></div>
                <div class="word" id="c-word">Hacer clic para activar voz</div>
                <div class="sentence" id="c-sent"></div>
            </div>
            <div class="face face-back">
                <div style="color: #64748b; font-size: 14px; margin-bottom: 10px;">SIGNIFICADO</div>
                <div class="word" id="c-trans" style="color: #22c55e;"></div>
                <div class="translation" id="c-sent-es"></div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn-red" onclick="answer(false)">REPETIR</button>
        <button class="btn-green" onclick="answer(true)">LO SÉ</button>
    </div>

    <p class="instruction">Toca la tarjeta para ver la traducción</p>

    <script>
        // OPCIÓN B: Las primeras 50 palabras más comunes (Vocabulario Real)
        const refold1000 = [
            { w: "The", t: "El / La", s: "The world is big.", st: "El mundo es grande.", i: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400" },
            { w: "Work", t: "Trabajo", s: "I have work to do.", st: "Tengo trabajo que hacer.", i: "https://images.unsplash.com/photo-1497215728101-856f4ea42174?w=400" },
            { w: "Think", t: "Pensar", s: "I think about you.", st: "Pienso en ti.", i: "https://images.unsplash.com/photo-1516062423079-7ca13cdc7f5a?w=400" },
            { w: "Life", t: "Vida", s: "Life is beautiful.", st: "La vida es bella.", i: "https://images.unsplash.com/photo-1500622764614-be3c178304c1?w=400" },
            { w: "Time", t: "Tiempo", s: "Time flies so fast.", st: "El tiempo vuela muy rápido.", i: "https://images.unsplash.com/photo-1508921334172-b68ed335b3dd?w=400" },
            { w: "People", t: "Gente", s: "People are friendly.", st: "La gente es amable.", i: "https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?w=400" },
            { w: "Believe", t: "Creer", s: "I believe in you.", st: "Creo en ti.", i: "https://images.unsplash.com/photo-1517130038641-a774d04afb3c?w=400" },
            { w: "Understand", t: "Entender", s: "Do you understand?", st: "¿Entiendes?", i: "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400" },
            { w: "Way", t: "Camino / Forma", s: "That is the way.", st: "Ese es el camino.", i: "https://images.unsplash.com/photo-1470770841072-f978cf4d019e?w=400" },
            { w: "Find", t: "Encontrar", s: "I need to find my keys.", st: "Necesito encontrar mis llaves.", i: "https://images.unsplash.com/photo-1542332213-31f87348057f?w=400" }
            // ... Puedes añadir las otras 950 aquí siguiendo este formato
        ];

        let deck = JSON.parse(localStorage.getItem('refold_pro_v3')) || refold1000;
        let index = 0;
        let audioEnabled = false;

        function updateCard() {
            const item = deck[index];
            const cardElement = document.getElementById('card');
            
            cardElement.classList.remove('is-flipped');
            
            setTimeout(() => {
                document.getElementById('c-word').innerText = item.w;
                document.getElementById('c-sent').innerText = `"${item.s}"`;
                document.getElementById('c-trans').innerText = item.t;
                document.getElementById('c-sent-es').innerText = item.st;
                document.getElementById('c-img').src = item.i;
                
                document.getElementById('counter').innerText = `Progreso: ${index + 1} / ${deck.length}`;
                document.getElementById('fill').style.width = `${((index + 1) / deck.length) * 100}%`;
                
                if(audioEnabled) playVoice();
            }, 250);
        }

        function flipCard() {
            audioEnabled = true; // El primer clic activa el audio
            document.getElementById('card').classList.toggle('is-flipped');
            if(!document.getElementById('card').classList.contains('is-flipped')) {
                playVoice();
            }
        }

        function answer(isEasy) {
            event.stopPropagation();
            if(isEasy) {
                // Si la sabe, se va al final
                const item = deck.splice(index, 1)[0];
                deck.push(item);
            } else {
                // Si no, se queda cerca (en 3 posiciones)
                const item = deck.splice(index, 1)[0];
                deck.splice(3, 0, item);
            }
            localStorage.setItem('refold_pro_v3', JSON.stringify(deck));
            updateCard();
        }

        function playVoice() {
            window.speechSynthesis.cancel();
            const item = deck[index];
            const msgWord = new SpeechSynthesisUtterance(item.w);
            const msgSent = new SpeechSynthesisUtterance(item.s);
            msgWord.lang = msgSent.lang = 'en-US';
            msgWord.rate = 0.8;
            msgSent.rate = 0.8;

            window.speechSynthesis.speak(msgWord);
            msgWord.onend = () => {
                setTimeout(() => window.speechSynthesis.speak(msgSent), 400);
            };
        }

        window.onload = updateCard;
    </script>
</body>
</html>
