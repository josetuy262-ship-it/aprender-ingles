<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Refold 1000 Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #05070a; --card: #111827; --accent: #6366f1; --success: #10b981; --text: #f8fafc; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Navegaci칩n responsiva */
        nav { width: 280px; background: #0f172a; border-right: 2px solid #1e293b; padding: 20px; display: flex; flex-direction: column; height: 100vh; overflow-y: auto; }
        @media (max-width: 768px) { nav { width: 80px; padding: 10px; } .nav-text { display: none; } }

        .nav-item { padding: 15px; border-radius: 12px; cursor: pointer; margin-bottom: 8px; color: #94a3b8; font-weight: 700; background: rgba(255,255,255,0.02); transition: 0.3s; text-align: center; }
        .nav-item.active { background: var(--accent); color: white; }
        .nav-item.special { background: #fbbf24; color: #000; }

        /* 츼rea de Estudio con espaciado mejorado */
        main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .card-container { perspective: 1200px; width: 100%; max-width: 340px; height: 450px; margin: 25px 0; }
        .card { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
        .card.is-flipped { transform: rotateY(180deg); }
        .face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 35px; padding: 25px; display: flex; flex-direction: column; align-items: center; background: var(--card); border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 15px 35px rgba(0,0,0,0.5); }
        .face-back { transform: rotateY(180deg); background: #0f172a; border: 2px solid var(--accent); }

        .img-box { width: 100%; height: 200px; border-radius: 20px; overflow: hidden; margin-bottom: 20px; background: #000; }
        img { width: 100%; height: 100%; object-fit: cover; }

        .word { font-size: 28px; font-weight: 800; margin-bottom: 10px; text-align: center; }
        .sentence { font-size: 16px; color: #94a3b8; text-align: center; font-style: italic; line-height: 1.4; }

        .controls { display: flex; gap: 15px; width: 100%; max-width: 340px; margin-top: 10px; }
        .btn { flex: 1; padding: 18px; border: none; border-radius: 20px; font-weight: 800; cursor: pointer; color: white; font-size: 0.9rem; }
        
        #overlay { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; }
    </style>
</head>
<body>

   <div id="overlay">
    <h1 style="font-size: 2.5rem; margin-bottom: 10px;">Refold Mastery</h1>
    <p style="color: #64748b; margin-bottom: 30px;">Optimizado para M칩vil y PC</p>

    <div style="margin-bottom: 25px; color: #1e293b; font-weight: 600; font-family: sans-serif;">
        <label for="words-per-day" style="display: block; margin-bottom: 8px; font-size: 0.9rem; color: #64748b;">CARTAS NUEVAS POR MAZO AL D칈A</label>
        <select id="words-per-day" style="padding: 12px 20px; border-radius: 12px; border: 2px solid #e2e8f0; background: white; font-size: 1rem; width: 200px; cursor: pointer;">
            <option value="5">5 palabras</option>
            <option value="10" selected>10 palabras</option>
            <option value="20">20 palabras</option>
            <option value="100">Ver todas (Modo repaso)</option>
        </select>
    </div>

    <button onclick="iniciar()" style="padding: 20px 50px; border-radius: 50px; background: var(--accent); color: white; border: none; font-weight: 800; font-size: 1.1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
        COMENZAR SESI칍N
    </button>
</div>

    <nav><div id="menu-items"></div></nav>

    <main>
        <div id="streak-info" style="color: #fbbf24; font-weight: 800;">游댠 Racha: 0 d칤as</div>
        <div class="card-container">
            <div class="card" id="card" onclick="this.classList.toggle('is-flipped')">
                <div class="face">
                    <div class="img-box"><img id="q-img" src=""></div>
                    <div class="word" id="q-word">...</div>
                    <div class="sentence" id="q-sent">...</div>
                </div>
                <div class="face face-back">
                    <div style="color: var(--accent); font-weight: 800; margin-bottom: 15px; font-size: 0.8rem;">TRADUCCI칍N</div>
                    <div class="word" id="a-word" style="color: var(--success);">...</div>
                    <div class="sentence" id="a-sent" style="color: white;">...</div>
                </div>
            </div>
        </div>
        <div id="progress-tag" style="color: #475569; font-size: 0.8rem; margin-bottom: 15px;">Tarjeta 0 de 0</div>
        <div class="controls">
            <button class="btn" style="background: #334155;" onclick="responder(false)">REPETIR</button>
            <button class="btn" style="background: var(--accent);" onclick="responder(true)">ENTENDIDO</button>
        </div>
    </main>

<script>
    // 1. BASE DE DATOS INICIAL
    const data = {
        "repaso": [],
        1: [
            { w: "Actually", t: "En realidad", s: "Actually, it's very easy.", st: "En realidad, es muy f치cil.", i: "https://picsum.photos/seed/1/400/300" },
            { w: "Development", t: "Desarrollo", s: "Focus on development.", st: "Enf칩cate en el desarrollo.", i: "https://picsum.photos/seed/2/400/300" },
            { w: "Requirement", t: "Requisito", s: "It's a basic requirement.", st: "Es un requisito b치sico.", i: "https://picsum.photos/seed/3/400/300" },
            { w: "Knowledge", t: "Conocimiento", s: "Knowledge is power.", st: "El conocimiento es poder.", i: "https://picsum.photos/seed/4/400/300" },
            { w: "Environment", t: "Medio ambiente", s: "Protect the environment.", st: "Protege el medio ambiente.", i: "https://picsum.photos/seed/5/400/300" },
            { w: "Improvement", t: "Mejora", s: "I see a big improvement.", st: "Veo una gran mejora.", i: "https://picsum.photos/seed/6/400/300" },
            { w: "Available", t: "Disponible", s: "Is this seat available?", st: "쮼st치 este asiento disponible?", i: "https://picsum.photos/seed/7/400/300" },
            { w: "Challenge", t: "Desaf칤o", s: "Accept the challenge.", st: "Acepta el desaf칤o.", i: "https://picsum.photos/seed/8/400/300" },
            { w: "Growth", t: "Crecimiento", s: "The company has fast growth.", st: "La empresa tiene un crecimiento r치pido.", i: "https://picsum.photos/seed/9/400/300" },
            { w: "Income", t: "Ingresos", s: "His income is very high.", st: "Sus ingresos son muy altos.", i: "https://picsum.photos/seed/10/400/300" }
        ],
        2: [], 3: [], 4: [], 5: [], 6: [], 7: [], 8: [], 9: [], 10: []
    };

    // 2. LLENADO AUTOM츼TICO (Tu l칩gica de las 1000 palabras)
    for (let m = 1; m <= 10; m++) {
        if (data[m].length < 100) {
            let inicio = data[m].length;
            for (let i = inicio; i < 100; i++) {
                data[m].push({
                    w: `Word ${i + 1} (Mazo ${m})`,
                    t: `Palabra ${i + 1}`,
                    s: `Example sentence for word ${i + 1}.`,
                    st: `Oraci칩n de ejemplo para la palabra ${i + 1}.`,
                    i: `https://picsum.photos/seed/m${m}img${i}/400/300`
                });
            }
        }
    }

    let currentDeck = 1;
    let currentIndex = 0;
    let wordsPerDeck = 5;

    // 3. FUNCI칍N DE INICIO CON FILTRO ANKI
    function iniciar() {
        // Leer preferencia del usuario del selector que a침adimos
        const select = document.getElementById('words-per-day');
        wordsPerDeck = parseInt(select.value);

        const hoy = new Date().getDay(); // 0: Dom, 6: Sab
        const esFinDeSemana = (hoy === 0 || hoy === 6);

        if (esFinDeSemana) {
            prepararRepasoFinDeSemana();
        } else {
            // Filtramos cada mazo para que solo tenga las N palabras elegidas
            for (let m = 1; m <= 10; m++) {
                data[m] = data[m].slice(0, wordsPerDeck);
            }
        }

        document.getElementById('overlay').style.display = 'none';
        crearMenu(esFinDeSemana);
        cargarTarjeta();
    }

    function prepararRepasoFinDeSemana() {
        let pool = [];
        for (let m = 1; m <= 10; m++) {
            pool = pool.concat(data[m].slice(0, wordsPerDeck));
        }
        // Mezclar aleatoriamente
        pool.sort(() => Math.random() - 0.5);
        data["repaso"] = pool;
        currentDeck = "repaso";
    }

    function crearMenu(esFinde) {
        const menu = document.getElementById('menu-items');
        menu.innerHTML = '';
        
        const mazosAMostrar = esFinde ? ["repaso"] : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

        mazosAMostrar.forEach(key => {
            const btn = document.createElement('div');
            btn.className = `nav-item ${currentDeck == key ? 'active' : ''}`;
            btn.innerHTML = `<span class="nav-text">${key === 'repaso' ? 'REPASO FIN DE SEMANA' : 'MAZO ' + key}</span>`;
            btn.onclick = () => {
                currentDeck = key;
                currentIndex = 0;
                actualizarEstiloMenu(btn);
                cargarTarjeta();
            };
            menu.appendChild(btn);
        });
    }

    function actualizarEstiloMenu(elementoActivo) {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        elementoActivo.classList.add('active');
    }

    function cargarTarjeta() {
        const deck = data[currentDeck];
        if (!deck || deck.length === 0) return;

        const item = deck[currentIndex];
        document.getElementById('card').classList.remove('is-flipped');
        
        document.getElementById('q-img').src = item.i;
        document.getElementById('q-word').innerText = item.w;
        document.getElementById('q-sent').innerText = item.s;
        
        document.getElementById('a-word').innerText = item.t;
        document.getElementById('a-sent').innerText = item.st;
        
        document.getElementById('progress-tag').innerText = `Tarjeta ${currentIndex + 1} de ${deck.length}`;
    }

    function responder(entendido) {
        const deck = data[currentDeck];
        if (entendido) {
            currentIndex++;
            if (currentIndex >= deck.length) {
                alert("춰Mazo completado!");
                currentIndex = 0;
            }
        } else {
            // Si falla, se mueve al final (Repetici칩n)
            const item = deck.splice(currentIndex, 1)[0];
            deck.push(item);
        }
        cargarTarjeta();
    }
</script>
</body>
</html>
